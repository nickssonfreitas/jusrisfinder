<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1397px" preserveAspectRatio="none" style="width:569px;height:1397px;background:#FFFFFF;" version="1.1" viewBox="0 0 569 1397" width="569px" zoomAndPan="magnify"><title>Fluxo Detalhado de Processamento - Busca</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="536.7227" x="15" y="35.4209">Fluxo Detalhado de Processamento - Busca</text></g><!--cluster 1. QUERY PARSING--><g class="cluster" data-qualified-name="1. QUERY PARSING" data-source-line="13" id="ent0002"><rect fill="#E3F2FD" height="152.19" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="164" x="133.8327" y="58.6094"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53.1426" x="189.2614" y="73.6045">&#171;input&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="148.9346" x="141.3654" y="89.9014">1. QUERY PARSING</text></g><!--cluster 2. EMBEDDING--><g class="cluster" data-qualified-name="2. EMBEDDING" data-source-line="17" id="ent0004"><rect fill="#E3F2FD" height="135.89" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="132" x="148.8327" y="234.7994"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53.1426" x="188.2614" y="249.7945">&#171;input&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115.3223" x="157.1716" y="266.0914">2. EMBEDDING</text></g><!--cluster 3. HYBRID SEARCH--><g class="cluster" data-qualified-name="3. HYBRID SEARCH" data-source-line="21" id="ent0006"><rect fill="#FFF3E0" height="135.89" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="164" x="113.8327" y="394.6894"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63.9434" x="163.8611" y="409.6845">&#171;search&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="148.1963" x="121.7346" y="425.9814">3. HYBRID SEARCH</text></g><!--cluster 4. FILTERING--><g class="cluster" data-qualified-name="4. FILTERING" data-source-line="25" id="ent0008"><rect fill="#E8F5E9" height="135.89" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="132" x="148.8327" y="554.5794"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49.6973" x="189.9841" y="569.5745">&#171;filter&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="101.9375" x="163.864" y="585.8714">4. FILTERING</text></g><!--cluster 5. RERANKING--><g class="cluster" data-qualified-name="5. RERANKING" data-source-line="29" id="ent0010"><rect fill="#FFF3E0" height="135.89" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="128" x="143.8327" y="714.4694"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63.9434" x="175.8611" y="729.4645">&#171;search&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="112.875" x="151.3952" y="745.7614">5. RERANKING</text></g><!--cluster 6. ML RULES--><g class="cluster" data-qualified-name="6. ML RULES" data-source-line="33" id="ent0012"><rect fill="#FCE4EC" height="135.89" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="136" x="146.8327" y="874.3594"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="34.6582" x="197.5036" y="889.3545">&#171;ml&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="98.376" x="165.6447" y="905.6514">6. ML RULES</text></g><!--cluster 7. ALERTAS--><g class="cluster" data-qualified-name="7. ALERTAS" data-source-line="37" id="ent0014"><rect fill="#FCE4EC" height="152.19" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="122" x="153.8327" y="1034.2494"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="34.6582" x="197.5036" y="1049.2445">&#171;ml&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90.501" x="169.5822" y="1065.5414">7. ALERTAS</text></g><!--cluster 8. RESPONSE--><g class="cluster" data-qualified-name="8. RESPONSE" data-source-line="41" id="ent0016"><rect fill="#F3E5F5" height="152.19" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="138" x="145.8327" y="1210.4394"/><text fill="#000000" font-family="Verdana" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63.3076" x="183.1789" y="1225.4345">&#171;output&#187;</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="103.8857" x="162.8899" y="1241.7314">8. RESPONSE</text></g><!--entity step1--><g class="entity" data-qualified-name="1. QUERY PARSING.step1" data-source-line="14" id="ent0003"><rect fill="#FFFFFF" height="85.1875" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.5742" x="162.5427" y="109.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.6006" x="172.5427" y="132.6045">Extrair</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="73.8418" x="172.5427" y="148.9014">entidades:</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.5742" x="172.5427" y="165.1982">nome, data,</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="56.4307" x="172.5427" y="181.4951">tipo doc</text></g><!--entity step2--><g class="entity" data-qualified-name="2. EMBEDDING.step2" data-source-line="18" id="ent0005"><rect fill="#FFFFFF" height="68.8906" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.1738" x="165.2427" y="285.7994"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39.5527" x="175.2427" y="308.7945">Gerar</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="79.1738" x="175.2427" y="325.0914">embedding</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62.3301" x="175.2427" y="341.3882">da query</text></g><!--entity step3--><g class="entity" data-qualified-name="3. HYBRID SEARCH.step3" data-source-line="22" id="ent0007"><rect fill="#FFFFFF" height="68.8906" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="89.248" x="170.2127" y="445.6894"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="42.0479" x="180.2127" y="468.6845">Busca</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.248" x="180.2127" y="484.9814">vetorial +</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="59.6641" x="180.2127" y="501.2782">keyword</text></g><!--entity step4--><g class="entity" data-qualified-name="4. FILTERING.step4" data-source-line="26" id="ent0009"><rect fill="#FFFFFF" height="68.8906" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="99.8438" x="164.9127" y="605.5794"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48.2754" x="174.9127" y="628.5745">Aplicar</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="79.8438" x="174.9127" y="644.8714">permissoes</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="73.7324" x="174.9127" y="661.1682">do usuario</text></g><!--entity step5--><g class="entity" data-qualified-name="5. RERANKING.step5" data-source-line="30" id="ent0011"><rect fill="#FFFFFF" height="68.8906" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="77.0049" x="176.3327" y="765.4694"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="43.7363" x="186.3327" y="788.4645">Cross-</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57.0049" x="186.3327" y="804.7614">encoder</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.6846" x="186.3327" y="821.0582">rerank</text></g><!--entity step6--><g class="entity" data-qualified-name="6. ML RULES.step6" data-source-line="34" id="ent0013"><rect fill="#FFFFFF" height="68.8906" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.123" x="162.7727" y="925.3594"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="58.6865" x="172.7727" y="948.3545">Verificar</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="32.4434" x="172.7727" y="964.6514">docs</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.123" x="172.7727" y="980.9482">obrigatorios</text></g><!--entity step7--><g class="entity" data-qualified-name="7. ALERTAS.step7" data-source-line="38" id="ent0015"><rect fill="#FFFFFF" height="85.1875" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="90.1504" x="169.7527" y="1085.2494"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39.5527" x="179.7527" y="1108.2445">Gerar</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70.1504" x="179.7527" y="1124.5414">alertas de</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="32.4434" x="179.7527" y="1140.8382">docs</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61.7354" x="179.7527" y="1157.1351">faltantes</text></g><!--entity step8--><g class="entity" data-qualified-name="8. RESPONSE.step8" data-source-line="42" id="ent0017"><rect fill="#FFFFFF" height="85.1875" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="106.4951" x="161.5827" y="1261.4394"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61.3594" x="171.5827" y="1284.4345">Retornar</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.1006" x="171.5827" y="1300.7314">top-k</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.4951" x="171.5827" y="1317.0282">documentos</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="64.3809" x="171.5827" y="1333.3251">+ alertas</text></g><g class="entity" data-qualified-name="GMN25" data-source-line="54" id="ent0026"><path d="M294.4927,444.8694 L294.4927,476.1394 L259.8827,480.1394 L294.4927,484.1394 L294.4927,515.4006 A0,0 0 0 0 294.4927,515.4006 L451.1739,515.4006 A0,0 0 0 0 451.1739,515.4006 L451.1739,454.8694 L441.1739,444.8694 L294.4927,444.8694 A0,0 0 0 0 294.4927,444.8694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M441.1739,444.8694 L441.1739,454.8694 L451.1739,454.8694 L441.1739,444.8694" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="103.6826" x="300.4927" y="461.9363">Hybrid Search</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.6812" x="300.4927" y="477.0691">- Qdrant (semantico)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.1782" x="300.4927" y="492.2019">- BM25 (keyword)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.793" x="300.4927" y="507.3347">- RRF Fusion</text></g><g class="entity" data-qualified-name="GMN28" data-source-line="61" id="ent0029"><path d="M288.7727,764.6494 L288.7727,795.9194 L253.6727,799.9194 L288.7727,803.9194 L288.7727,835.1806 A0,0 0 0 0 288.7727,835.1806 L466.8899,835.1806 A0,0 0 0 0 466.8899,835.1806 L466.8899,774.6494 L456.8899,764.6494 L288.7727,764.6494 A0,0 0 0 0 288.7727,764.6494" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M456.8899,764.6494 L456.8899,774.6494 L466.8899,774.6494 L456.8899,764.6494" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67.1392" x="294.7727" y="781.7163">Reranker</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.7725" x="294.7727" y="796.8491">- Cohere Rerank v3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.1172" x="294.7727" y="811.9819">- ou Cross-encoder local</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.3325" x="294.7727" y="827.1147">- Melhora precisao</text></g><g class="entity" data-qualified-name="GMN31" data-source-line="68" id="ent0032"><path d="M301.8527,924.5394 L301.8527,955.8094 L267.3127,959.8094 L301.8527,963.8094 L301.8527,995.0706 A0,0 0 0 0 301.8527,995.0706 L445.8068,995.0706 A0,0 0 0 0 445.8068,995.0706 L445.8068,934.5394 L435.8068,924.5394 L301.8527,924.5394 A0,0 0 0 0 301.8527,924.5394" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M435.8068,924.5394 L435.8068,934.5394 L445.8068,934.5394 L435.8068,924.5394" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.5166" x="307.8527" y="941.6063">ML Rules Engine</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.2915" x="307.8527" y="956.7391">- Tipo de processo</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.9541" x="307.8527" y="971.8719">- Docs obrigatorios</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.5962" x="307.8527" y="987.0047">- Base PostgreSQL</text></g><!--link step1 to step2--><g class="link" data-entity-1="ent0003" data-entity-2="ent0005" data-link-type="dependency" data-source-line="45" id="lnk18"><path d="M214.8327,195.1094 C214.8327,223.0594 214.8327,253.3394 214.8327,279.4494" fill="none" id="step1-to-step2" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,285.4494,218.8327,276.4494,214.8327,280.4494,210.8327,276.4494,214.8327,285.4494" style="stroke:#000000;stroke-width:1;"/></g><!--link step2 to step3--><g class="link" data-entity-1="ent0005" data-entity-2="ent0007" data-link-type="dependency" data-source-line="46" id="lnk19"><path d="M214.8327,355.1194 C214.8327,381.7594 214.8327,412.6994 214.8327,439.3194" fill="none" id="step2-to-step3" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,445.3194,218.8327,436.3194,214.8327,440.3194,210.8327,436.3194,214.8327,445.3194" style="stroke:#000000;stroke-width:1;"/></g><!--link step3 to step4--><g class="link" data-entity-1="ent0007" data-entity-2="ent0009" data-link-type="dependency" data-source-line="47" id="lnk20"><path d="M214.8327,515.0094 C214.8327,541.6494 214.8327,572.5894 214.8327,599.2094" fill="none" id="step3-to-step4" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,605.2094,218.8327,596.2094,214.8327,600.2094,210.8327,596.2094,214.8327,605.2094" style="stroke:#000000;stroke-width:1;"/></g><!--link step4 to step5--><g class="link" data-entity-1="ent0009" data-entity-2="ent0011" data-link-type="dependency" data-source-line="48" id="lnk21"><path d="M214.8327,674.8994 C214.8327,701.5394 214.8327,732.4794 214.8327,759.0994" fill="none" id="step4-to-step5" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,765.0994,218.8327,756.0994,214.8327,760.0994,210.8327,756.0994,214.8327,765.0994" style="stroke:#000000;stroke-width:1;"/></g><!--link step5 to step6--><g class="link" data-entity-1="ent0011" data-entity-2="ent0013" data-link-type="dependency" data-source-line="49" id="lnk22"><path d="M214.8327,834.7894 C214.8327,861.4294 214.8327,892.3694 214.8327,918.9894" fill="none" id="step5-to-step6" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,924.9894,218.8327,915.9894,214.8327,919.9894,210.8327,915.9894,214.8327,924.9894" style="stroke:#000000;stroke-width:1;"/></g><!--link step6 to step7--><g class="link" data-entity-1="ent0013" data-entity-2="ent0015" data-link-type="dependency" data-source-line="50" id="lnk23"><path d="M214.8327,994.4094 C214.8327,1020.5594 214.8327,1051.0094 214.8327,1079.0394" fill="none" id="step6-to-step7" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,1085.0394,218.8327,1076.0394,214.8327,1080.0394,210.8327,1076.0394,214.8327,1085.0394" style="stroke:#000000;stroke-width:1;"/></g><!--link step7 to step8--><g class="link" data-entity-1="ent0015" data-entity-2="ent0017" data-link-type="dependency" data-source-line="51" id="lnk24"><path d="M214.8327,1170.5694 C214.8327,1197.9494 214.8327,1227.6194 214.8327,1255.0494" fill="none" id="step7-to-step8" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="214.8327,1261.0494,218.8327,1252.0494,214.8327,1256.0494,210.8327,1252.0494,214.8327,1261.0494" style="stroke:#000000;stroke-width:1;"/></g><g class="footer" data-source-line="74"><text fill="#000000" font-family="Verdana" font-size="10" lengthAdjust="spacing" textLength="240.9473" x="162.8877" y="1381.9116">JurisFinder LEAN - Fluxo de Busca | Janeiro 2026</text></g><?plantuml-src XPJRRjf048Rl_HJJz2Ob0QM0WLPH90xh70eqCKcbIDnix05Ms3jqTvqcQllkNQzT9mAQSW6QOVn_ipE_zvrPOOgmIRYGdcU4IH2297iY6A7XoOh71372jQ88jUOfIaDGXq6c8-vvUYtaXYkUWiB8SBcqJ__qm7u6F5el5MKo7b92wlJK5cRcx0pUirRG34RxYpHo5QtogY08MknaVzL290QLq-e5FlkqlofDdCwGjTbmVmLbfkp9ilp0ztvxtiiv3ZusuEQEXVTmtGzdbzFp0tWvHN78LyNioIWkr5pQ0OcOnwW_pwMa58yXveOVpsrwOqT9qG5m3ThWvkCMhza0DXcmqUX_h7DKF2Ub3nZ7GYxdCkRmFKFrN6atjxHR3RYu7uIN8vYnVZYyoFMhOUy0t7RdyX4DAS4JE9hBDJx_81LNWDOMeDs0u79yoyAo-Mf7E-BzJIAYlFyDgbHeJQZj0GWodN4bg2AqjmX-0q8MzgTVIiA_snygqhgUhoAY62r9sO79TQMylUXE0oPZ2E_6R9OBE-FiY7v39HP5utQ9jcLwK6B9ymcHhgGxMzBT1lJ7BBpjlw5ShfCdg8oLYV4lOS4JMsFmHRwx9T_BPpAx_ZgTiLo_ClGE8ynNANECeKrzxGYPUvajvmXATiNfvHpdKQZNpqf7kUygRhcuLSLj5xUhs7UnNyKT5tUgkElYRXNtF4-IGR13NHcWHGa1gDKkdkseOvYvXTTgDbU7czYkrC2XnjJ-YeW-kFHWqlJXi3HhaGh3089C2v8UoXXoo3wKxr2XSmggaZAa5Ig48WkFBPUa30g7bVw2X2AUkByccAn8STZOqGlDwKrYnn5pvsK9Qc1oAIIMu5jtMTXxkRXtoIL7rXNmsdR5aRcszpDfirGuknc_GYx8_YYuofJGWP1vgsFMdzfdYXlUwhit7Nx15PSe547pfDdv0m00?></g></svg>